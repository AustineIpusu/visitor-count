import json
import boto3
from boto3.dynamodb.conditions import Key

dynamodb = boto3.resource('dynamodb')
table = dynamodb.Table('VisitorCount')  # Must match your Terraform table name

def lambda_handler(event, context):
    try:
        # Update visitor count logic here
        response = table.update_item(
    Key={'SiteName': 'MyPortfolio'},
    UpdateExpression='ADD VisitorCount :inc',
    ExpressionAttributeValues={':inc': 1},
    ReturnValues='UPDATED_NEW'
)
        return {
            'statusCode': 200,
            'body': json.dumps({
                'message': 'Hello World!',
                'visitor_count': response['Attributes']['VisitorCount']
            })
        }
    except Exception as e:
        return {
            'statusCode': 500,
            'body': json.dumps({'error': str(e)})
        }